<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Intro to Data Wrangling, Exploration, and Analysis with R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Nina Brooks  Assistant Professor, UConn School of Public Policy" />
    <meta name="date" content="2022-07-12" />
    <script src="2022-07-12_day_2_slides_files/header-attrs/header-attrs.js"></script>
    <link href="2022-07-12_day_2_slides_files/remark-css/default.css" rel="stylesheet" />
    <link href="2022-07-12_day_2_slides_files/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="2022-07-12_day_2_slides_files/kePrint/kePrint.js"></script>
    <link href="2022-07-12_day_2_slides_files/lightable/lightable.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Intro to Data Wrangling, Exploration, and Analysis with R
]
.subtitle[
## Summer 2022 Workshop: Day 2
]
.author[
### Nina Brooks<br> Assistant Professor, UConn School of Public Policy
]
.date[
### July 12, 2022
]

---






# Welcome to Day 2

## Agenda
1. Questions from yesterday's topics

--

2. Descriptive statistics &amp; nice looking tables

--

3. Linear Regression &amp; exporting nice looking tables

--

4. Data Visualization 
---

class: middle, center, inverse
# Questions?

---

# Descriptive statistics

We already saw how you use `dplyr` commands like `mutate()` and `summarise()` to compute descriptive statistics, such as means, standard deviations, etc:

--



.pull-left[

```r
wdi_df %&gt;%
    group_by(country) %&gt;%
    summarise_at(
        vars(gdppc, electricity, malaria), 
        mean, na.rm = TRUE) %&gt;%
    head(n = 5)
```
]

.pull-right[

```
## # A tibble: 5 × 4
##   country         gdppc electricity   malaria
##   &lt;chr&gt;           &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan      548.        79.2  15.9    
## 2 Albania         4026.       100.  NaN      
## 3 Algeria         4067.        99.3   0.00269
## 4 American Samoa 11745.       NaN   NaN      
## 5 Andorra        35802.       100   NaN
```
]

--

But often you will want to prepare nice looking, well-formatted tables to include in reports and publications. And there are *many* packages in R that can help with this. I like [`gtsummmary`](https://www.danieldsjoberg.com/gtsummary/) because it is relatively easy to make nice looking tables, but also flexible and extensively customizable for different needs. `gtsummmary` is also `tidyverse` adjacent package, so it fits nicely with the family of packages we're already working with.

---
layout:true
# Summary tables with `gtsummary`&lt;img src="./figs/gtsummary.png" alt="tidyr" width="90"/&gt;
---

`gtsummary` contains two primary commands: `tbl_summary()`, which is for summary or descriptive tables, and `tbl_regression()`, which is for tables of regression results (more on this later). Make sure to install it (only before the first use) and load it along with all your other packages.


```r
# install.packages("gtsummary") # uncomment to install
library(gtsummary)
```

To demonstrate the functionality, let's work with a smaller version of this WDI data: a sub-sample of just South Asian countries with fewer variables.


```r
sa &lt;- wdi_df %&gt;%
     mutate(
        # create a logical variable to filter with
        south_asia = country %in% c("Afghanistan", "Bangladesh","Bhutan",
                                         "India", "Maldives", "Nepal", 
                                         "Pakistan", "Sri Lanka")
    ) %&gt;%
    filter(south_asia) %&gt;%
    select(country, year, electricity, malaria, gdppc)
```

---

The default output from `tbl_summary()` is meant to be publication ready. The `tbl_summary()` function takes a data frame as the only input, and returns descriptive statistics for each column in the data frame. This command has some useful features:

- Variable types are automatically detected so that appropriate descriptive statistics are calculated.
- Label attributes from the data set are automatically printed.
- Missing values are listed as “Unknown” in the table.
- Variable levels are indented and footnotes are added.

---



```r
sa %&gt;%
    tbl_summary(by = country)
```

<div id="zdnybbrbtz" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zdnybbrbtz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zdnybbrbtz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zdnybbrbtz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zdnybbrbtz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zdnybbrbtz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zdnybbrbtz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zdnybbrbtz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zdnybbrbtz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zdnybbrbtz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zdnybbrbtz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zdnybbrbtz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zdnybbrbtz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zdnybbrbtz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zdnybbrbtz .gt_from_md > :first-child {
  margin-top: 0;
}

#zdnybbrbtz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zdnybbrbtz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zdnybbrbtz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zdnybbrbtz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zdnybbrbtz .gt_row_group_first td {
  border-top-width: 2px;
}

#zdnybbrbtz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zdnybbrbtz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zdnybbrbtz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zdnybbrbtz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zdnybbrbtz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zdnybbrbtz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zdnybbrbtz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zdnybbrbtz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zdnybbrbtz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zdnybbrbtz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zdnybbrbtz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zdnybbrbtz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zdnybbrbtz .gt_left {
  text-align: left;
}

#zdnybbrbtz .gt_center {
  text-align: center;
}

#zdnybbrbtz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zdnybbrbtz .gt_font_normal {
  font-weight: normal;
}

#zdnybbrbtz .gt_font_bold {
  font-weight: bold;
}

#zdnybbrbtz .gt_font_italic {
  font-style: italic;
}

#zdnybbrbtz .gt_super {
  font-size: 65%;
}

#zdnybbrbtz .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#zdnybbrbtz .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#zdnybbrbtz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zdnybbrbtz .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#zdnybbrbtz .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#zdnybbrbtz .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Afghanistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bangladesh</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bhutan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>India</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Maldives</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Nepal</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Pakistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Sri Lanka</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">year</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td>
<td class="gt_row gt_center">2,016 (2,013, 2,018)</td></tr>
    <tr><td class="gt_row gt_left">electricity</td>
<td class="gt_row gt_center">90 (69, 98)</td>
<td class="gt_row gt_center">75 (62, 90)</td>
<td class="gt_row gt_center">96 (89, 100)</td>
<td class="gt_row gt_center">88 (81, 94)</td>
<td class="gt_row gt_center">100 (99, 100)</td>
<td class="gt_row gt_center">85 (76, 90)</td>
<td class="gt_row gt_center">71 (71, 72)</td>
<td class="gt_row gt_center">94 (89, 99)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">malaria</td>
<td class="gt_row gt_center">13.9 (11.8, 18.9)</td>
<td class="gt_row gt_center">1.9 (1.5, 3.3)</td>
<td class="gt_row gt_center">0.0 (0.0, 0.1)</td>
<td class="gt_row gt_center">9.2 (6.4, 10.9)</td>
<td class="gt_row gt_center">NA (NA, NA)</td>
<td class="gt_row gt_center">0.6 (0.3, 1.5)</td>
<td class="gt_row gt_center">5.1 (3.7, 7.9)</td>
<td class="gt_row gt_center">0.0 (0.0, 0.0)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">12</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">gdppc</td>
<td class="gt_row gt_center">553 (538, 557)</td>
<td class="gt_row gt_center">1,248 (1,104, 1,451)</td>
<td class="gt_row gt_center">2,753 (2,490, 2,991)</td>
<td class="gt_row gt_center">1,606 (1,381, 1,814)</td>
<td class="gt_row gt_center">9,033 (8,813, 9,314)</td>
<td class="gt_row gt_center">897 (806, 993)</td>
<td class="gt_row gt_center">1,357 (1,276, 1,448)</td>
<td class="gt_row gt_center">3,844 (3,508, 4,060)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="9"><sup class="gt_footnote_marks">1</sup> Median (IQR)</td>
    </tr>
  </tfoot>
</table>
</div>

???
This is what an "off-the-shelf" table looks like. I'm using the `by = country` option to get summary statistics by country. Ask what the table is showing first, then explain. 

By default, this has given us the median value of each variable for each country (remember we have 12 years) and put the interquartile range in parentheses. It also gave us this for the year, which we don't really want.
---

Remember factor variables from yesterday? Factors are used for storing categorical variables and have a lot of useful properties for plotting as we'll see later. Factors are comprised of two components: the actual values of the data and the possible levels within the factor. 

Let's see what happens if we convert `year` from a numeric variable to a factor:
.pull-left[

```r
sa %&gt;%
    mutate(
        year = factor(year)
    ) %&gt;%
    tbl_summary(by = country)
```
]

.pull-right[
<div id="vrjkqkjsrv" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#vrjkqkjsrv .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vrjkqkjsrv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vrjkqkjsrv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vrjkqkjsrv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vrjkqkjsrv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vrjkqkjsrv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vrjkqkjsrv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vrjkqkjsrv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vrjkqkjsrv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vrjkqkjsrv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vrjkqkjsrv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vrjkqkjsrv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#vrjkqkjsrv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vrjkqkjsrv .gt_from_md > :first-child {
  margin-top: 0;
}

#vrjkqkjsrv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vrjkqkjsrv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vrjkqkjsrv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vrjkqkjsrv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vrjkqkjsrv .gt_row_group_first td {
  border-top-width: 2px;
}

#vrjkqkjsrv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrjkqkjsrv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vrjkqkjsrv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vrjkqkjsrv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vrjkqkjsrv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrjkqkjsrv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vrjkqkjsrv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vrjkqkjsrv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vrjkqkjsrv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vrjkqkjsrv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrjkqkjsrv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vrjkqkjsrv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vrjkqkjsrv .gt_left {
  text-align: left;
}

#vrjkqkjsrv .gt_center {
  text-align: center;
}

#vrjkqkjsrv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vrjkqkjsrv .gt_font_normal {
  font-weight: normal;
}

#vrjkqkjsrv .gt_font_bold {
  font-weight: bold;
}

#vrjkqkjsrv .gt_font_italic {
  font-style: italic;
}

#vrjkqkjsrv .gt_super {
  font-size: 65%;
}

#vrjkqkjsrv .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#vrjkqkjsrv .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#vrjkqkjsrv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vrjkqkjsrv .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#vrjkqkjsrv .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#vrjkqkjsrv .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Afghanistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bangladesh</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bhutan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>India</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Maldives</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Nepal</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Pakistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Sri Lanka</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">year</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2010</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2011</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2012</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2013</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2014</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2015</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2016</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2017</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2018</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2019</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2020</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2021</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td>
<td class="gt_row gt_center">1 (8.3%)</td></tr>
    <tr><td class="gt_row gt_left">electricity</td>
<td class="gt_row gt_center">90 (69, 98)</td>
<td class="gt_row gt_center">75 (62, 90)</td>
<td class="gt_row gt_center">96 (89, 100)</td>
<td class="gt_row gt_center">88 (81, 94)</td>
<td class="gt_row gt_center">100 (99, 100)</td>
<td class="gt_row gt_center">85 (76, 90)</td>
<td class="gt_row gt_center">71 (71, 72)</td>
<td class="gt_row gt_center">94 (89, 99)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">malaria</td>
<td class="gt_row gt_center">13.9 (11.8, 18.9)</td>
<td class="gt_row gt_center">1.9 (1.5, 3.3)</td>
<td class="gt_row gt_center">0.0 (0.0, 0.1)</td>
<td class="gt_row gt_center">9.2 (6.4, 10.9)</td>
<td class="gt_row gt_center">NA (NA, NA)</td>
<td class="gt_row gt_center">0.6 (0.3, 1.5)</td>
<td class="gt_row gt_center">5.1 (3.7, 7.9)</td>
<td class="gt_row gt_center">0.0 (0.0, 0.0)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">12</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">gdppc</td>
<td class="gt_row gt_center">553 (538, 557)</td>
<td class="gt_row gt_center">1,248 (1,104, 1,451)</td>
<td class="gt_row gt_center">2,753 (2,490, 2,991)</td>
<td class="gt_row gt_center">1,606 (1,381, 1,814)</td>
<td class="gt_row gt_center">9,033 (8,813, 9,314)</td>
<td class="gt_row gt_center">897 (806, 993)</td>
<td class="gt_row gt_center">1,357 (1,276, 1,448)</td>
<td class="gt_row gt_center">3,844 (3,508, 4,060)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="9"><sup class="gt_footnote_marks">1</sup> n (%); Median (IQR)</td>
    </tr>
  </tfoot>
</table>
</div>
]

???
This is a pretty ugly table now - but you can see that year is being treated differently - instead of giving us a median &amp; IQR, it's reporting the number of observations per country &amp; year with the % in parentheses. So for example, in 2010 we have 1 observation for afghanistan, which is 8.3% of all the observations for afghanistan 
---

Now, let's see how this can be further customized. We'll get rid of the `year` variable, which we don't need in the table and change which statistics we want to show:

.pull-left[

```r
sa %&gt;%
    select(-c(year)) %&gt;%
    tbl_summary(
        by = country,
        statistic = all_continuous() ~ "{mean} ({sd})"
        )
```
]

.pull-right[
<div id="hydizzexzg" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#hydizzexzg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hydizzexzg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hydizzexzg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hydizzexzg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hydizzexzg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hydizzexzg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hydizzexzg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hydizzexzg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hydizzexzg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hydizzexzg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hydizzexzg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hydizzexzg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#hydizzexzg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hydizzexzg .gt_from_md > :first-child {
  margin-top: 0;
}

#hydizzexzg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hydizzexzg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hydizzexzg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#hydizzexzg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hydizzexzg .gt_row_group_first td {
  border-top-width: 2px;
}

#hydizzexzg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hydizzexzg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#hydizzexzg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hydizzexzg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hydizzexzg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hydizzexzg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hydizzexzg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hydizzexzg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hydizzexzg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hydizzexzg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hydizzexzg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hydizzexzg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hydizzexzg .gt_left {
  text-align: left;
}

#hydizzexzg .gt_center {
  text-align: center;
}

#hydizzexzg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hydizzexzg .gt_font_normal {
  font-weight: normal;
}

#hydizzexzg .gt_font_bold {
  font-weight: bold;
}

#hydizzexzg .gt_font_italic {
  font-style: italic;
}

#hydizzexzg .gt_super {
  font-size: 65%;
}

#hydizzexzg .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#hydizzexzg .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#hydizzexzg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hydizzexzg .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#hydizzexzg .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#hydizzexzg .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Afghanistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bangladesh</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bhutan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>India</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Maldives</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Nepal</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Pakistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Sri Lanka</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">electricity</td>
<td class="gt_row gt_center">79 (22)</td>
<td class="gt_row gt_center">75 (15)</td>
<td class="gt_row gt_center">93 (9)</td>
<td class="gt_row gt_center">86 (10)</td>
<td class="gt_row gt_center">100 (0)</td>
<td class="gt_row gt_center">83 (9)</td>
<td class="gt_row gt_center">72 (2)</td>
<td class="gt_row gt_center">94 (6)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">malaria</td>
<td class="gt_row gt_center">15.9 (6.9)</td>
<td class="gt_row gt_center">2.3 (1.3)</td>
<td class="gt_row gt_center">0.1 (0.3)</td>
<td class="gt_row gt_center">9.3 (4.3)</td>
<td class="gt_row gt_center">NA (NA)</td>
<td class="gt_row gt_center">1.1 (1.2)</td>
<td class="gt_row gt_center">5.9 (2.7)</td>
<td class="gt_row gt_center">0.0 (0.0)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">12</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">gdppc</td>
<td class="gt_row gt_center">548 (18)</td>
<td class="gt_row gt_center">1,283 (231)</td>
<td class="gt_row gt_center">2,742 (324)</td>
<td class="gt_row gt_center">1,604 (259)</td>
<td class="gt_row gt_center">8,966 (902)</td>
<td class="gt_row gt_center">896 (115)</td>
<td class="gt_row gt_center">1,364 (99)</td>
<td class="gt_row gt_center">3,741 (416)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Unknown</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="9"><sup class="gt_footnote_marks">1</sup> Mean (SD)</td>
    </tr>
  </tfoot>
</table>
</div>
]

???
Explain the all_continuous. Looking better, but now let's add some styling.
---

.pull-left[

```r
sa %&gt;%
    select(-c(year)) %&gt;%
    tbl_summary(
        by = country,
        statistic = all_continuous() ~ "{mean} ({sd})",
        digits = all_continuous() ~ 2,
        label = list(
            electricity ~ "Electricity access (% of population)",
            malaria ~ "Malaria prevalence (% of population",
            gdppc ~ "GDP per capita"),
        missing_text = "Missing"
        )
```
]

.pull-right[
<div id="lgsdwnpnyy" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#lgsdwnpnyy .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lgsdwnpnyy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lgsdwnpnyy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lgsdwnpnyy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lgsdwnpnyy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lgsdwnpnyy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lgsdwnpnyy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lgsdwnpnyy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lgsdwnpnyy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lgsdwnpnyy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lgsdwnpnyy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lgsdwnpnyy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#lgsdwnpnyy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lgsdwnpnyy .gt_from_md > :first-child {
  margin-top: 0;
}

#lgsdwnpnyy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lgsdwnpnyy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lgsdwnpnyy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lgsdwnpnyy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lgsdwnpnyy .gt_row_group_first td {
  border-top-width: 2px;
}

#lgsdwnpnyy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgsdwnpnyy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lgsdwnpnyy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lgsdwnpnyy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lgsdwnpnyy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgsdwnpnyy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lgsdwnpnyy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lgsdwnpnyy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lgsdwnpnyy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lgsdwnpnyy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgsdwnpnyy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lgsdwnpnyy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgsdwnpnyy .gt_left {
  text-align: left;
}

#lgsdwnpnyy .gt_center {
  text-align: center;
}

#lgsdwnpnyy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lgsdwnpnyy .gt_font_normal {
  font-weight: normal;
}

#lgsdwnpnyy .gt_font_bold {
  font-weight: bold;
}

#lgsdwnpnyy .gt_font_italic {
  font-style: italic;
}

#lgsdwnpnyy .gt_super {
  font-size: 65%;
}

#lgsdwnpnyy .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#lgsdwnpnyy .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#lgsdwnpnyy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lgsdwnpnyy .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#lgsdwnpnyy .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#lgsdwnpnyy .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Afghanistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bangladesh</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bhutan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>India</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Maldives</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Nepal</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Pakistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Sri Lanka</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Electricity access (% of population)</td>
<td class="gt_row gt_center">79.25 (21.65)</td>
<td class="gt_row gt_center">74.90 (14.98)</td>
<td class="gt_row gt_center">92.57 (8.76)</td>
<td class="gt_row gt_center">86.46 (9.65)</td>
<td class="gt_row gt_center">99.71 (0.33)</td>
<td class="gt_row gt_center">82.55 (9.22)</td>
<td class="gt_row gt_center">71.90 (1.54)</td>
<td class="gt_row gt_center">93.78 (5.51)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Missing</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">Malaria prevalence (% of population</td>
<td class="gt_row gt_center">15.94 (6.85)</td>
<td class="gt_row gt_center">2.30 (1.33)</td>
<td class="gt_row gt_center">0.15 (0.26)</td>
<td class="gt_row gt_center">9.33 (4.31)</td>
<td class="gt_row gt_center">NA (NA)</td>
<td class="gt_row gt_center">1.06 (1.18)</td>
<td class="gt_row gt_center">5.95 (2.69)</td>
<td class="gt_row gt_center">0.02 (0.04)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Missing</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">12</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
    <tr><td class="gt_row gt_left">GDP per capita</td>
<td class="gt_row gt_center">547.65 (17.64)</td>
<td class="gt_row gt_center">1,282.83 (231.31)</td>
<td class="gt_row gt_center">2,742.18 (323.58)</td>
<td class="gt_row gt_center">1,604.06 (259.34)</td>
<td class="gt_row gt_center">8,965.95 (902.45)</td>
<td class="gt_row gt_center">895.82 (114.96)</td>
<td class="gt_row gt_center">1,364.33 (98.93)</td>
<td class="gt_row gt_center">3,741.48 (416.41)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Missing</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">1</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="9"><sup class="gt_footnote_marks">1</sup> Mean (SD)</td>
    </tr>
  </tfoot>
</table>
</div>
]

???
Explain the digits is rounding. We can also get rid of the missing row and add an overall column, which is handy
---


```r
sa %&gt;%
    select(-c(year)) %&gt;%
    tbl_summary(
        by = country,
        statistic = all_continuous() ~ "{mean} ({sd})",
        digits = all_continuous() ~ 2,
        label = list(
            electricity ~ "Electricity access (% of population)",
            malaria ~ "Malaria prevalence (% of population",
            gdppc ~ "GDP per capita (constant 2015 US$)"),
        missing = "no"
        ) %&gt;%
    # you can pipe the different commands
    add_overall() %&gt;%
    modify_caption("**Table 1. Development Characteristics for South Asia (2010 - 2021)**") %&gt;%
    bold_labels()
```


---


<div id="mvmdochgdc" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#mvmdochgdc .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mvmdochgdc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mvmdochgdc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mvmdochgdc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mvmdochgdc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mvmdochgdc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mvmdochgdc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mvmdochgdc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mvmdochgdc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mvmdochgdc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mvmdochgdc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mvmdochgdc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#mvmdochgdc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mvmdochgdc .gt_from_md > :first-child {
  margin-top: 0;
}

#mvmdochgdc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mvmdochgdc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mvmdochgdc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mvmdochgdc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mvmdochgdc .gt_row_group_first td {
  border-top-width: 2px;
}

#mvmdochgdc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mvmdochgdc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mvmdochgdc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mvmdochgdc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mvmdochgdc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mvmdochgdc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mvmdochgdc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mvmdochgdc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mvmdochgdc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mvmdochgdc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mvmdochgdc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mvmdochgdc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mvmdochgdc .gt_left {
  text-align: left;
}

#mvmdochgdc .gt_center {
  text-align: center;
}

#mvmdochgdc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mvmdochgdc .gt_font_normal {
  font-weight: normal;
}

#mvmdochgdc .gt_font_bold {
  font-weight: bold;
}

#mvmdochgdc .gt_font_italic {
  font-style: italic;
}

#mvmdochgdc .gt_super {
  font-size: 65%;
}

#mvmdochgdc .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#mvmdochgdc .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#mvmdochgdc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mvmdochgdc .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#mvmdochgdc .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#mvmdochgdc .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  &lt;caption&gt;&lt;strong&gt;Table 1. Development Characteristics for South Asia (2010 - 2021)&lt;/strong&gt;&lt;/caption&gt;
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Overall</strong>, N = 96<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Afghanistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bangladesh</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Bhutan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>India</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Maldives</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Nepal</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Pakistan</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Sri Lanka</strong>, N = 12<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="font-weight: bold;">Electricity access (% of population)</td>
<td class="gt_row gt_center">85.14 (14.03)</td>
<td class="gt_row gt_center">79.25 (21.65)</td>
<td class="gt_row gt_center">74.90 (14.98)</td>
<td class="gt_row gt_center">92.57 (8.76)</td>
<td class="gt_row gt_center">86.46 (9.65)</td>
<td class="gt_row gt_center">99.71 (0.33)</td>
<td class="gt_row gt_center">82.55 (9.22)</td>
<td class="gt_row gt_center">71.90 (1.54)</td>
<td class="gt_row gt_center">93.78 (5.51)</td></tr>
    <tr><td class="gt_row gt_left" style="font-weight: bold;">Malaria prevalence (% of population</td>
<td class="gt_row gt_center">4.96 (6.36)</td>
<td class="gt_row gt_center">15.94 (6.85)</td>
<td class="gt_row gt_center">2.30 (1.33)</td>
<td class="gt_row gt_center">0.15 (0.26)</td>
<td class="gt_row gt_center">9.33 (4.31)</td>
<td class="gt_row gt_center">NA (NA)</td>
<td class="gt_row gt_center">1.06 (1.18)</td>
<td class="gt_row gt_center">5.95 (2.69)</td>
<td class="gt_row gt_center">0.02 (0.04)</td></tr>
    <tr><td class="gt_row gt_left" style="font-weight: bold;">GDP per capita (constant 2015 US$)</td>
<td class="gt_row gt_center">2,643.04 (2,620.89)</td>
<td class="gt_row gt_center">547.65 (17.64)</td>
<td class="gt_row gt_center">1,282.83 (231.31)</td>
<td class="gt_row gt_center">2,742.18 (323.58)</td>
<td class="gt_row gt_center">1,604.06 (259.34)</td>
<td class="gt_row gt_center">8,965.95 (902.45)</td>
<td class="gt_row gt_center">895.82 (114.96)</td>
<td class="gt_row gt_center">1,364.33 (98.93)</td>
<td class="gt_row gt_center">3,741.48 (416.41)</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="10"><sup class="gt_footnote_marks">1</sup> Mean (SD)</td>
    </tr>
  </tfoot>
</table>
</div>

---

Let's look at another example, using a sample dataset that comes with the `gtsummary` package when you load it. This set contains data from 200 patients who received one of two types of chemotherapy (Drug A or Drug B). The outcomes are tumor response and death.


```r
head(trial)
```

```
## # A tibble: 6 × 8
##   trt      age marker stage grade response death ttdeath
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;    &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 Drug A    23  0.16  T1    II           0     0    24  
## 2 Drug B     9  1.11  T2    I            1     0    24  
## 3 Drug A    31  0.277 T1    II           0     0    24  
## 4 Drug A    NA  2.07  T3    III          1     1    17.6
## 5 Drug A    51  2.77  T4    III          1     1    16.4
## 6 Drug B    39  0.613 T4    I            0     1    15.6
```

---

Often with data like this, you want to compare characteristics across two groups (Drug A vs. Drug B) and calculate whether the differences are statistically significant. You can easily do this with `tbl_summary()`. 


```r
tbl &lt;- trial %&gt;%
    select(trt, age, stage, marker) %&gt;%
    tbl_summary(
        by = trt,
        missing = "no",
        digits = age ~ 1,
        statistic  = all_continuous() ~ "{mean} ({sd})") %&gt;%
    add_overall() %&gt;% # adds an overall column
    add_n() %&gt;% # adds the overall sample size
    add_difference() %&gt;% # calculates diff b/w Drug A &amp; B; p-value
    # add_difference also adds the CI by default, but i chose to hide that column
    modify_column_hide(ci)
```
???
Explain overall, n, diff; highlight the nice labels

---

<div id="dsfztoxwdx" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#dsfztoxwdx .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dsfztoxwdx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dsfztoxwdx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dsfztoxwdx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dsfztoxwdx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dsfztoxwdx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dsfztoxwdx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dsfztoxwdx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dsfztoxwdx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dsfztoxwdx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dsfztoxwdx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dsfztoxwdx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#dsfztoxwdx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dsfztoxwdx .gt_from_md > :first-child {
  margin-top: 0;
}

#dsfztoxwdx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dsfztoxwdx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dsfztoxwdx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dsfztoxwdx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dsfztoxwdx .gt_row_group_first td {
  border-top-width: 2px;
}

#dsfztoxwdx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsfztoxwdx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dsfztoxwdx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dsfztoxwdx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dsfztoxwdx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsfztoxwdx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dsfztoxwdx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dsfztoxwdx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dsfztoxwdx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dsfztoxwdx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsfztoxwdx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dsfztoxwdx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dsfztoxwdx .gt_left {
  text-align: left;
}

#dsfztoxwdx .gt_center {
  text-align: center;
}

#dsfztoxwdx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dsfztoxwdx .gt_font_normal {
  font-weight: normal;
}

#dsfztoxwdx .gt_font_bold {
  font-weight: bold;
}

#dsfztoxwdx .gt_font_italic {
  font-style: italic;
}

#dsfztoxwdx .gt_super {
  font-size: 65%;
}

#dsfztoxwdx .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#dsfztoxwdx .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#dsfztoxwdx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dsfztoxwdx .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#dsfztoxwdx .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#dsfztoxwdx .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Overall</strong>, N = 200<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Drug A</strong>, N = 98<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Drug B</strong>, N = 102<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Difference</strong><sup class="gt_footnote_marks">2</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong><sup class="gt_footnote_marks">2</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Age</td>
<td class="gt_row gt_center">189</td>
<td class="gt_row gt_center">47.2 (14.3)</td>
<td class="gt_row gt_center">47.0 (14.7)</td>
<td class="gt_row gt_center">47.4 (14.0)</td>
<td class="gt_row gt_center">-0.44</td>
<td class="gt_row gt_center">0.8</td></tr>
    <tr><td class="gt_row gt_left">T Stage</td>
<td class="gt_row gt_center">200</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.12</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">T1</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">53 (26%)</td>
<td class="gt_row gt_center">28 (29%)</td>
<td class="gt_row gt_center">25 (25%)</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">T2</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">54 (27%)</td>
<td class="gt_row gt_center">25 (26%)</td>
<td class="gt_row gt_center">29 (28%)</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">T3</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">43 (22%)</td>
<td class="gt_row gt_center">22 (22%)</td>
<td class="gt_row gt_center">21 (21%)</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">T4</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">50 (25%)</td>
<td class="gt_row gt_center">23 (23%)</td>
<td class="gt_row gt_center">27 (26%)</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">Marker Level (ng/mL)</td>
<td class="gt_row gt_center">190</td>
<td class="gt_row gt_center">0.92 (0.86)</td>
<td class="gt_row gt_center">1.02 (0.89)</td>
<td class="gt_row gt_center">0.82 (0.83)</td>
<td class="gt_row gt_center">0.20</td>
<td class="gt_row gt_center">0.12</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="7"><sup class="gt_footnote_marks">1</sup> Mean (SD); n (%)</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="7"><sup class="gt_footnote_marks">2</sup> Welch Two Sample t-test; Standardized Mean Difference</td>
    </tr>
  </tfoot>
</table>
</div>

---

`gtsummary` tables can be saved as an images, RTFs, .tex files, PDFs, or Word files. Depending on what type of file you want to export your table as, you may need to use a companion package.


```r
tbl %&gt;%
  as_gt() %&gt;% # need to convert to a "gt" object first
  # use extensions .html .tex .ltx .rtf
  gt::gtsave(filename = "./output/trial_characteristics.tex") 


tbl %&gt;%
  as_flex_table() %&gt;% # need to convert to a "flex_table" object first
  flextable::save_as_docx(path = "./output/trial_characteristics.docx")
```

---

There are many more options to customize your tables. Remember to read the detailed "vignette" on [`gtsummary`](https://www.danieldsjoberg.com/gtsummary/index.html) and use the help option within R: `?tbl_summary()` or `help(tbl_summary)`. 

And, always remember to Google your specific question and look for answers on [stack overflow](https://stackoverflow.com/). Odds are, someone else has had the same question and you'll find a solution!

---
layout: false
class: middle, center, inverse
# Questions?
---

# Statistical Inference

All of the statistical inference tasks you've learned about in classes and maybe how to perform in other programs (e.g. Stata) are possible in R. I'll demonstrate two common tasks:

--

1. t-tests
2. Linear regression

--

In addition to many built in commands that come in every installation of R, we'll use a few additional packages that make it easy to do common things (e.g., cluster standard errors, absorb fixed effects), as well as create publication ready tables and figures from your results.


```r
install.packages("fixest") # fixed effects regression, TSLS, &amp; SE
install.packages("broom") # for creating "tidy" regression tables
install.packages("AER") # contains all the datasets from Stock &amp; Watson
install.packages("sandwich") # for calculating robust SE
install.packages("clubSandwich") # for calculating cluster-robust SE
```

For anyone that learned econometrics here at SPP with the Stock and Watson textbook, there is an [online R companion](https://www.econometrics-with-r.org/) to that book that demonstrates how to do everything in R. 

???
This topic will not focus on any of the theory behind these tasks - that's for your econometrics courses - just demonstrate how to do them in R. 
---

# Penguin Data

.pull-left[
To demonstrate some of these tasks, we'll use a datas et on penguins, collected at the Palmer station in Antarctica. It's designed for demonstrating patterns in data (and is more fun than student-teacher ratios 😉).

You can access this data by installing, loading the package, &amp; calling the data:


```r
install.pacakges("palmerpenguins")
library(palmerpenguins)
penguins # loads the data
```

]

.pull-right[
Palmer Penguins (art by [Allison Horst](https://allisonhorst.github.io/))
![Penguins](figs/penguins.png)
]
---
# Penguin Data

Let's take a look at what's in this data:


```
## Rows: 344
## Columns: 8
## $ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
## $ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
## $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
## $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
## $ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
## $ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
## $ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
## $ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
```
---

layout: true
# t-tests
---

Base R option includes a command to run t-test: `t.test()`. Let's go to RStudio and take a quick look at the help page for `t.test()` first.

--

Let's do a simple t-test to test a hypothesis about the mean flipper length of penguins:
`$$H_0: \mu = 185 \\
H_1: \mu \neq 185$$`

--

.pull-left[

```r
t.test(
    flipper_length_mm ~ 1, 
    mu = 185, alternative = "two.sided", 
*   data = penguins
)
```
]

--

.pull-right[

```
## 
## 	One Sample t-test
## 
## data:  flipper_length_mm
## t = 20.931, df = 341, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 185
## 95 percent confidence interval:
##  199.4196 202.4108
## sample estimates:
## mean of x 
##  200.9152
```
]

???
We haven't used a lot a non-tidyverse commands/commands without pipes - so i want to draw your attention to attention to the data argument in this command. if you're not working with a pipe (where you specify the dataframe first and then chain commands), then you MUST tell R what data frame you're working with
---

Is there a tidyverse t-test, you ask? 🤔 

--
Why yes, of course there is 🙌 

It comes in the [`infer`](https://infer.netlify.app/) package. And, the syntax is very similar to the base R command, but the output is a little nicer to look at. The output is conveniently stored in a tidy tibble, which you can export as a table or make a plot with. Let's take a quick look at the documentation in R.

--

```r
*penguins %&gt;%
    t_test(
*       response = flipper_length_mm,
        mu = 185,  alternative = "two.sided"
        )
```

--



```
## # A tibble: 1 × 7
##   statistic  t_df  p_value alternative estimate lower_ci upper_ci
##       &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1      20.9   341 3.78e-63 two.sided       201.     199.     202.
```

???
Here I highlighted where we call the data when using a pipe, just to emphasize the difference with the base R option. I also highlight the line where we specify the variable we're testing a hypothesis about. It;s called a response variable.
---

Let's do a two-group t-test, where we are testing whether the flipper length of male and female penguins is the same.

`$$H_0: \mu_M = \mu_F \\
H_1: \mu_M \neq  \mu_F$$`


--


```r
penguins %&gt;% 
    t_test(
*       formula = flipper_length_mm ~ sex,
        alternative = "two.sided"
    )
```

--


```
## # A tibble: 1 × 7
##   statistic  t_df    p_value alternative estimate lower_ci upper_ci
##       &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1     -4.81  325. 0.00000234 two.sided      -7.14    -10.1    -4.22
```
???
Now we're specifying a formula, that says test the difference of the first variable according to groups of the 2nd variable. 

---
layout: false
class: middle, center, inverse
# Questions?
---

layout:true
# Regression
---

R comes with built in commands to run regressions. The primary command is `lm()` (linear model). Let's look at the help file.

--

Let's start with a simple OLS to look at the relationship between body mass and flipper length of penguins.


```r
lm(body_mass_g ~ flipper_length_mm, data = penguins)
```

```
## 
## Call:
## lm(formula = body_mass_g ~ flipper_length_mm, data = penguins)
## 
## Coefficients:
##       (Intercept)  flipper_length_mm  
##          -5780.83              49.69
```
???
ask someone to explain the output/interpret the coefficient
---

If you want to see a bit more information (standard errors maybe?), you need to call `summary()` on an `lm` object.

Notice that I am storing the regression in a new object I called `reg`:


```r
*reg &lt;- lm(
    body_mass_g ~ flipper_length_mm, 
    data = penguins) 
summary(reg)
```

```
## 
## Call:
## lm(formula = body_mass_g ~ flipper_length_mm, data = penguins)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1058.80  -259.27   -26.88   247.33  1288.69 
## 
## Coefficients:
##                    Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)       -5780.831    305.815  -18.90   &lt;2e-16 ***
## flipper_length_mm    49.686      1.518   32.72   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 394.3 on 340 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.759,	Adjusted R-squared:  0.7583 
## F-statistic:  1071 on 1 and 340 DF,  p-value: &lt; 2.2e-16
```

---



```
## 
## Call:
## lm(formula = body_mass_g ~ flipper_length_mm, data = penguins)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1058.80  -259.27   -26.88   247.33  1288.69 
## 
## Coefficients:
##                    Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)       -5780.831    305.815  -18.90   &lt;2e-16 ***
## flipper_length_mm    49.686      1.518   32.72   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 394.3 on 340 degrees of freedom
##   (2 observations deleted due to missingness)
## Multiple R-squared:  0.759,	Adjusted R-squared:  0.7583 
## F-statistic:  1071 on 1 and 340 DF,  p-value: &lt; 2.2e-16
```

???
ask them to explain the output
---

The [`broom`](https://broom.tidymodels.org/) package provides a few tools to conveniently summarize regression models in R. As always, make sure you install (just once) and load the package prior to use. The `broom::tidy()` command produces a nice, tidy table of your regression results.

--


```r
tidy(reg)
```

```
## # A tibble: 2 × 5
##   term              estimate std.error statistic   p.value
##   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)        -5781.     306.       -18.9 5.59e- 55
## 2 flipper_length_mm     49.7      1.52      32.7 4.37e-107
```

---

Let's add a few more variables to this model and make it a multivariate regression.

--


```r
mvreg &lt;- lm( 
*   body_mass_g ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex,
    data = penguins) 
```



The only difference is that you add each additional variable with a **+**.

---



```r
tidy(mvreg, conf.int = TRUE)
```

```
## # A tibble: 5 × 7
##   term              estimate std.error statistic  p.value conf.low conf.high
##   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)       -2288.      632.      -3.62  3.37e- 4  -3531.   -1046.  
## 2 flipper_length_mm    38.8       2.45    15.9   1.88e-42     34.0     43.6 
## 3 bill_length_mm       -2.33      4.68    -0.497 6.19e- 1    -11.5      6.89
## 4 bill_depth_mm       -86.1      15.6     -5.53  6.58e- 8   -117.     -55.5 
## 5 sexmale             541.       51.7     10.5   2.68e-22    439.     643.
```

This time, I included an option to add the confidence interval to the output. The default is a 95% confidence interval, but you can change the level by specifying the option `conf.level = 0.90` (which would give you a 90% CI).

???
interpret the coefficient on sex. sex is a factor variable -- so R knows to treat it like a binary variable in the regression.
---
layout: false
# Regression tables with `gtsummary`

We already saw how to use `gtsummary::tbl_summary()` to produce publication ready tables of summary statistics. We can also use it to produce regression tables with the command `tbl_regression()`.

.pull-left[

```r
tbl_regression(reg)
```

<div id="bfwuxxstky" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#bfwuxxstky .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bfwuxxstky .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bfwuxxstky .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bfwuxxstky .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bfwuxxstky .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bfwuxxstky .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bfwuxxstky .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bfwuxxstky .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bfwuxxstky .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bfwuxxstky .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bfwuxxstky .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bfwuxxstky .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#bfwuxxstky .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bfwuxxstky .gt_from_md > :first-child {
  margin-top: 0;
}

#bfwuxxstky .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bfwuxxstky .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bfwuxxstky .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bfwuxxstky .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bfwuxxstky .gt_row_group_first td {
  border-top-width: 2px;
}

#bfwuxxstky .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bfwuxxstky .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bfwuxxstky .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bfwuxxstky .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bfwuxxstky .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bfwuxxstky .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bfwuxxstky .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bfwuxxstky .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bfwuxxstky .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bfwuxxstky .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bfwuxxstky .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bfwuxxstky .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bfwuxxstky .gt_left {
  text-align: left;
}

#bfwuxxstky .gt_center {
  text-align: center;
}

#bfwuxxstky .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bfwuxxstky .gt_font_normal {
  font-weight: normal;
}

#bfwuxxstky .gt_font_bold {
  font-weight: bold;
}

#bfwuxxstky .gt_font_italic {
  font-style: italic;
}

#bfwuxxstky .gt_super {
  font-size: 65%;
}

#bfwuxxstky .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#bfwuxxstky .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#bfwuxxstky .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bfwuxxstky .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#bfwuxxstky .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#bfwuxxstky .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">flipper_length_mm</td>
<td class="gt_row gt_center">50</td>
<td class="gt_row gt_center">47, 53</td>
<td class="gt_row gt_center"><0.001</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><sup class="gt_footnote_marks">1</sup> CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
]

.pull-right[

```r
tbl_regression(mvreg)
```

<div id="eiwzvznqcf" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#eiwzvznqcf .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#eiwzvznqcf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eiwzvznqcf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#eiwzvznqcf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#eiwzvznqcf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eiwzvznqcf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#eiwzvznqcf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#eiwzvznqcf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#eiwzvznqcf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#eiwzvznqcf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#eiwzvznqcf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#eiwzvznqcf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#eiwzvznqcf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#eiwzvznqcf .gt_from_md > :first-child {
  margin-top: 0;
}

#eiwzvznqcf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#eiwzvznqcf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#eiwzvznqcf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#eiwzvznqcf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#eiwzvznqcf .gt_row_group_first td {
  border-top-width: 2px;
}

#eiwzvznqcf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eiwzvznqcf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#eiwzvznqcf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#eiwzvznqcf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eiwzvznqcf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#eiwzvznqcf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#eiwzvznqcf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#eiwzvznqcf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#eiwzvznqcf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eiwzvznqcf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eiwzvznqcf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#eiwzvznqcf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#eiwzvznqcf .gt_left {
  text-align: left;
}

#eiwzvznqcf .gt_center {
  text-align: center;
}

#eiwzvznqcf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#eiwzvznqcf .gt_font_normal {
  font-weight: normal;
}

#eiwzvznqcf .gt_font_bold {
  font-weight: bold;
}

#eiwzvznqcf .gt_font_italic {
  font-style: italic;
}

#eiwzvznqcf .gt_super {
  font-size: 65%;
}

#eiwzvznqcf .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#eiwzvznqcf .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#eiwzvznqcf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#eiwzvznqcf .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#eiwzvznqcf .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#eiwzvznqcf .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">flipper_length_mm</td>
<td class="gt_row gt_center">39</td>
<td class="gt_row gt_center">34, 44</td>
<td class="gt_row gt_center"><0.001</td></tr>
    <tr><td class="gt_row gt_left">bill_length_mm</td>
<td class="gt_row gt_center">-2.3</td>
<td class="gt_row gt_center">-12, 6.9</td>
<td class="gt_row gt_center">0.6</td></tr>
    <tr><td class="gt_row gt_left">bill_depth_mm</td>
<td class="gt_row gt_center">-86</td>
<td class="gt_row gt_center">-117, -55</td>
<td class="gt_row gt_center"><0.001</td></tr>
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
<td class="gt_row gt_center">541</td>
<td class="gt_row gt_center">439, 643</td>
<td class="gt_row gt_center"><0.001</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><sup class="gt_footnote_marks">1</sup> CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
]

--

That's a pretty good start - and you can do a lot better with some customization, but I personally prefer [`modelsummary`](https://vincentarelbundock.github.io/modelsummary/index.html) for regression tables.

???
You can combine these easily too into a single table.
---

layout: true
#  Regression tables with `modelsummary` &lt;img src="./figs/modelsummary.png" alt="ms" width="70"/&gt;
---


```r
modelsummary(
    list(
        "Simple OLS" = reg,
        "Multivariate Model" = mvreg
    ),
    gof_map = c("nobs", "r.squared"),
    stars = T
)
```
???
Explain the syntax (gof == goodness-of-fit) - the default includes a lot of extra statistics that i don't think are necessary. so here i'm keeping just the N &amp; R2
---


&lt;table style="NAborder-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Simple OLS &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Multivariate Model &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; (Intercept) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −5780.831*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2288.465*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (305.815) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (631.580) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; flipper_length_mm &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 49.686*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 38.826*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (1.518) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (2.448) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; bill_length_mm &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2.329 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (4.684) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; bill_depth_mm &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −86.088*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (15.570) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; sexmale &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 541.029*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; (51.710) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 342 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.759 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.823 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;

---

Let's customize a bit more -- just to see the full extent of what's possible with a little more work.



```r
modelsummary(
    list(
        "Simple OLS" = reg,
        "Multivariate Model" = mvreg
    ),
    fmt = 2,
    coef_map= c(
        "flipper_length_mm" = "Flipper Length (mm)", 
        "bill_length_mm" = "Bill Length (mm)",
        "bill_depth_mm" = "Bill Depth (mm)",
        "sexmale" = "Male", 
        "(Intercept)" = "Constant"),
    gof_map = c("nobs", "r.squared"),
    stars = F,
    notes = list("This table presents results of univariate and multivarate 
                 regression models."),
    output = "table1.png" # can change to other formats
    ) 
```

???
Explain all the syntax.

---

&lt;table style="NAborder-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Simple OLS &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Multivariate Model &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Flipper Length (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 49.69 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 38.83 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (1.52) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (2.45) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bill Length (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2.33 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (4.68) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bill Depth (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −86.09 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (15.57) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 541.03 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (51.71) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Constant &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −5780.83 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2288.46 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; (305.81) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; (631.58) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 342 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.759 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.823 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; This table presents results of univariate and multivarate 
                 regression models.&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;

???
The preview mode for these tables is actually different from how it saves - so let's take a quick look at that.
---

layout: true
# Leveling up regression with `fixest`
---

[`fixest`](https://cran.r-project.org/web/packages/fixest/vignettes/fixest_walkthrough.html) is a package designed for fast implementation of fixed effects regression, but also comes with the added benefit of making standard errors easy to adjust (ie., for clustering or heteroskedasticity) and built-in functionality for estimating two-stage least squares models. While there are other packages that can help with standard errors or run 2SLS, having them all in one package makes things easier.

--

The main command in `fixest` that parallels `lm()` in base R is `feols()`. You'll specify the regression formula and the data in the same way:


```r
mvfeols &lt;- feols( 
    body_mass_g ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex, 
    data = penguins) 
```

.footnote[
*Another good package that handles SE, fixed effects, and 2SLS well is [`estimatr`](https://declaredesign.org/r/estimatr/articles/getting-started.html). In contrast, commonly used (but more single purpose) packages that do some of these tasks are: `sandwich` for robust SE, `clubSandwich` for cluster-robust SE, and the `ivreg` pacakge for instrumental variables estimation. It's also possible to include fixed effects in a call to `lm()` in base R as long as the variable is a factor.
]

---

Here is what the output of `feols` looks like -- pretty similar to `lm()`, except it adds some useful information about the standard errors.


```
## OLS estimation, Dep. Var.: body_mass_g
## Observations: 333 
## Standard-errors: IID 
##                      Estimate Std. Error   t value   Pr(&gt;|t|)    
## (Intercept)       -2288.46499  631.58016 -3.623396 3.3685e-04 ***
## flipper_length_mm    38.82583    2.44776 15.861765  &lt; 2.2e-16 ***
## bill_length_mm       -2.32868    4.68430 -0.497125 6.1943e-01    
## bill_depth_mm       -86.08823   15.56985 -5.529164 6.5770e-08 ***
## sexmale             541.02853   51.70981 10.462784  &lt; 2.2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## RMSE: 338.2   Adj. R2: 0.820849
```

---

Let's add three models: 1) original model with robust standard errors, 2) original model with SE clustered at the species level, and 3) a model that adds year fixed effects.


```r
regRobust &lt;- feols( 
    body_mass_g ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex, 
*   vcov = "hetero",
    data = penguins) 

regCL &lt;- feols( 
    body_mass_g ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex, 
*   vcov =  ~species,
    data = penguins)

regFE &lt;- feols( 
*   body_mass_g ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex | year,
    data = penguins)
```
???
explain the syntax of the highlighted rows
---

&lt;table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Base Model &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Robust SE &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Clustered SE &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Fixed Effects &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Flipper Length (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 38.83 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 38.83 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 38.83 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 41.26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (2.45) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (2.64) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (3.68) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (1.49) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bill Length (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2.33 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2.33 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2.33 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −5.21 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (4.68) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (5.24) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (13.49) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (2.68) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bill Depth (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −86.09 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −86.09 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −86.09 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −79.44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (15.57) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (16.50) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (18.81) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (16.69) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 541.03 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 541.03 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 541.03 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 524.62 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (51.71) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (52.32) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (43.26) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; (30.20) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Constant &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2288.46 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2288.46 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −2288.46 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; (631.58) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; (657.92) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; (231.37) &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; R2 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.823 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.823 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.823 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.833 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Std.Errors &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; Heteroskedasticity-robust &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; by: species &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; by: year &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; FE: year &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; X &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

???
highlight how the coefficients are the same in cols 1:3, as expected but the SE are different, while both the coefs and SE are different in the model with FE. Model summary can report the standard errors &amp; presence of FE (but only for fixest object because that information is stored in R). Note that the default in fixest is to cluster the SE and the same level of the fixed effects (column 4). This output is all customizable.
---
layout: true
# Non-linear regression models
---

So far we've seen `lm()` and `feols()`, which both estimate linear OLS models. If you want to estimate a logistic or probit regression, you need the parallel commands: `glm()` and `feglm()`. Here are some examples of the base R and `fixest` options. In these examples, we'll first create a binary variable for `large_penguin` that = 1 if `body_mass_g &gt; 4050` and 0 otherwise.




### Base R

```r
logit_mod &lt;- glm(
    large_penguin ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex,
*   family = "binomial",
    data = penguins)

probit_mod &lt;- glm(
    large_penguin ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex,
*   family = binomial(link = "probit"),
    data = penguins)
```
???
4050 is the median body mass of all penguins in the data
---


### `fixest`
Unless you are adding fixest effects or adjusting the standard errors, the code will be the same as the base R version -- but you have to specify the `fixest` version of the regression command: `feglm()`


```r
*logit_mod &lt;- feglm(
    large_penguin ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex,
    family = "binomial", 
    data = penguins)

*probit_mod &lt;- feglm(
    large_penguin ~ flipper_length_mm + bill_length_mm + bill_depth_mm + sex,
    family = binomial(link = "probit"), 
    data = penguins)
```
---

You may recall that the coefficients from logit and probit models are not directly interpretable. Regression coefficients from logistic regression are typically expressed as odds ratios, while marginal effects are most often calculated after a probit regression.

--

There are a few tools you can use to convert these coefficients into the standard odds ratios or marginal effects. First, `broom::tidy()`, which has an option to exponentiate coefficients (e.g., convert them to odds ratios) when tidying regression results. 


```r
tidy(logit_mod, exponentiate = T)
```

```
## # A tibble: 5 × 5
##   term              estimate std.error statistic  p.value
##   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)        -32.2      7.05       -4.57 4.81e- 6
## 2 flipper_length_mm    0.217    0.0326      6.65 2.84e-11
## 3 bill_length_mm      -0.101    0.0438     -2.30 2.14e- 2
## 4 bill_depth_mm       -0.472    0.161      -2.94 3.30e- 3
## 5 sexmale              2.89     0.655       4.41 1.06e- 5
```
---

To calculate marginal effects, you can use the package [`marginaleffects`](https://vincentarelbundock.github.io/marginaleffects/index.html) (remember to install it first!). 


```r
#install.package("marginaleffects")
library(marginaleffects)
mfx &lt;- marginaleffects(probit_mod)

tidy(mfx)
```

```
##       type              term      contrast    estimate   std.error statistic
## 1 response flipper_length_mm         dY/dX  0.01866516 0.001906367  9.790960
## 2 response    bill_length_mm         dY/dX -0.00806964 0.003683788 -2.190582
## 3 response     bill_depth_mm         dY/dX -0.03929954 0.012887148 -3.049514
## 4 response               sex male - female  0.22615328 0.042472483  5.324701
##        p.value    conf.low     conf.high
## 1 0.000000e+00  0.01492875  0.0224015754
## 2 2.848206e-02 -0.01528973 -0.0008495477
## 3 2.292117e-03 -0.06455789 -0.0140411970
## 4 1.011191e-07  0.14290875  0.3093978223
```

---

Suppose you wanted to combine a linear, logit, and probit model in a single table to compare the results?




```r
modelsummary(
    list(
        "Linear" = lpm_mod,
        "Logit" = logit_mod,
        "Probit" = mfx),
    statistic = "conf.int", 
    fmt = 2,
    exponentiate = c(FALSE, TRUE, FALSE),
    coef_map= c(
        "flipper_length_mm" = "Flipper Length (mm)", 
        "bill_length_mm" = "Bill Length (mm)",
        "bill_depth_mm" = "Bill Depth (mm)",
        "sexmale" = "Male", 
        "sex" = "Male"),
    stars = T,
    gof_map = c("nobs"),
    notes = list(
        "95% confidencen intervals in brackets.") 
)
```
---

&lt;table style="NAborder-bottom: 0;border-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto;" class="table"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Linear &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Logit &lt;/th&gt;
   &lt;th style="text-align:center;"&gt; Probit &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Flipper Length (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.02*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 1.24*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.02*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [0.02, 0.03] &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [1.17, 1.32] &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [0.01, 0.02] &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bill Length (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.01 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.90* &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.01* &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [−0.02, 0.00] &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [0.83, 0.99] &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [−0.02, 0.00] &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bill Depth (mm) &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.06*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.62** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; −0.04** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [−0.09, −0.03] &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [0.46, 0.85] &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; [−0.06, −0.01] &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.23*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 17.94*** &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 0.23*** &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;box-shadow: 0px 1px"&gt;  &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; [0.13, 0.32] &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; [4.97, 64.81] &lt;/td&gt;
   &lt;td style="text-align:center;box-shadow: 0px 1px"&gt; [0.14, 0.31] &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Num.Obs. &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
   &lt;td style="text-align:center;"&gt; 333 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; + p &amp;lt; 0.1, * p &amp;lt; 0.05, ** p &amp;lt; 0.01, *** p &amp;lt; 0.001&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;tfoot&gt;&lt;tr&gt;&lt;td style="padding: 0; " colspan="100%"&gt;
&lt;sup&gt;&lt;/sup&gt; 95% confidencen intervals in brackets.&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;
---
layout: false
# Resources for regression analysis in R

Here is a list of resources that will be helpful as you get started with regression in R:

* [Econometrics with R](https://www.econometrics-with-r.org/): tracks the Stock &amp; Watson econometrics textbook)

* [Introduction to Regression in R](https://stats.oarc.ucla.edu/r/seminars/introduction-to-regression-in-r/): a series of guides from UCLA

* [Modeling Data in the Tidyverse](https://jhudatascience.org/tidyversecourse/model.html): the "tidyverse" approach to inference (a little more data science and a little less econometrics)

---
layout: false
class: middle, center, inverse
# Questions?
---

# Data Visuzaltion ✨

Data visualization is a critical part of any data project. Once data have been imported and wrangled into place, visualizing your data can help you get a handle on what’s going on in the dataset. And, once you’ve completed your analysis and are ready to present your findings, data visualizations are a highly effective way to communicate your results to others. 

--

In this workshop, I will introduce the powerful [`ggplot2`](https://ggplot2.tidyverse.org/) R package. But before we jump into `ggplot2`, we'll review a few principles and best practices of data visualization.

--

## Features of Good Plots
1. Clearly-labeled axes.
2. Legible text.
3. Axes that are not misleading.
4. Colors that work for the context and communication objective
5. The right kind of plot, given the data and communication objective.

.footnote[
*Extra thanks to the [JHU Data Science](https://jhudatascience.org/tidyversecourse/dataviz.html) course for the content in this section.
]

???
Be mindful of color blindness and how people are likely going to be viewing your figures.
---

# Plot Types 📊

The goal of data visualization in data analysis is to improve understanding of the data. Thinking about the best way to visualize your data before making the plot is an important step in the process of data visualization. 

--

Not every plot is good for every goal. For example, if your goal is to allow the viewer to compare values across groups, pie charts should largely be avoided. This is because it’s easier for the human eye to differentiate between bar heights than it is between similarly-sized slices of a pie.

--

We'll see how to generate each of these plot types in `ggplot2`:

* scatterplots
* histograms &amp; density plots
* barplots
* boxplots
* lineplots 
* maps! 🌐

???
I will first demonstrate how to create a basic version of each of these plot types and then we'll spend a good amount of time customizing and improving a basic plot - we'll take a "story telling" approach that you see a lot in data journalism
---
layout:true
# `ggplot2` basics  &lt;img src="./figs/ggplot.png" alt="gg" width="70"/&gt;
---

`ggplot2` is a system for declaratively creating graphics, based on [The Grammar of Graphics](https://www.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448/ref=as_li_ss_tl). You provide the data, tell `ggplot2` how to map variables to aesthetics, what graphical primitives to use, and it takes care of the details. Here is a useful `ggplot2` [cheat sheet](https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf).

--

To start building plots in `ggplot2`, we’ll need some data and we’ll need to know the type of plot we want to make. The type of plot you want to make in `ggplot2` is referred to as a geom. `ggplot2` is layered - layers of information add on top of each other as you build your graph.  In code written to generate a ggplot2 figure, you will see each line is separated by a plus sign `(+)`. Think of each line as a different layer of the graph.

--

To get started, we’ll start with the two basics (data and a geom) and build additional layers from there. All plots will start with the following general form:

.pull-left[

```r
ggplot(data = DATASET) +
    geom_PLOT_TYPE(mapping = aes(VARIABLES))
```

]

--

.pull-right[
Or if you're piping:

```r
DATASET %&gt;%
    ggplot() +
    geom_PLOT_TYPE(mapping = aes(VARIABLES))
```

]

???
you will always begin by calling the ggplot() function and then specifying your dataset or specify your dataset and then pipe the ggplot call. then you have to specify what geom type you’re interested in plotting. (geom, short for geometry, refers to the plot type
---

### Scatterplots

Scatterplots are often one of the first exploratory plots people make. They are useful when you’re looking at the relationship between two numeric variables.

--

The "geom" for a scatterplot is: `geom_point`. Within `geom` you will specify the arguments needed to tell `ggplot2` how you want your scatterplot to look. 

--

Then, you will map your variables with the **aesthetic** argument: `aes`. We specify these by defining `x` and `y` within the `aes()` argument. The x argument defines which variable will be along the bottom of the plot (x-axis). The y refers to which variable will be along the left side of the plot (y-axis).

--

We'll use the penguins dataset to demonstrate these.

---

.pull-left[

```r
penguins %&gt;%
    ggplot() +
    geom_point(
        aes(x = flipper_length_mm,
            y = body_mass_g)) 
```
]

--

.pull-right[
&lt;img src="2022-07-12_day_2_slides_files/figure-html/unnamed-chunk-1-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
???
without specifying much at all, we have a pretty nice looking plot
---

In the scatterplot we just generated, we saw that there was a (positive) relationship between flipper length and penguin size. There are three penguin species in this dataset: Adelie, Gentoo, and Chinstrap. You might wonder how the relationship between flipper length and penguin size varies by species. To see this, let's change the color of our points to differ based on the species by adding another arugment to the `aes()`.

--
.pull-left[

```r
penguins %&gt;%
    ggplot() +
    geom_point(
        aes(x = flipper_length_mm,
            y = body_mass_g,
*           color = species))
```
]

--

.pull-right[
&lt;img src="2022-07-12_day_2_slides_files/figure-html/unnamed-chunk-2-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
???
Because species is a factor variable, ggplot knows there are different categories of penguins, picks 3 default colors, and generates a legend -- all without specifying anything additional!




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"countIncrementalSlides": false,
"highlightStyle": "github",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
